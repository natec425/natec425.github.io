<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Voltorb Flip in Elm pt 2</title>
    <meta name="description" content="Last week I wrote a post about my progess implementing the Pokemon mini-game Voltorb Flip. I was struggling with a bug related to generating a new game, but the elm mailing list helped me out (Thanks Joseph Ni). In this post I'll talk about Elm, my implem...">
    <meta name="author"      content="Nate Clark">
    <meta name="keywords"    content="Functional Programming, Elm, Pokemon">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="http://www.example.com/blog/2016/09/02/voltorb-flip-in-elm-pt-2/">
    <link rel="next" href="/blog/2016/08/26/voltorb-flip-in-elm/">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/feeds/all.rss.xml" title="RSS Feed">
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-xxxxx', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <!-- A standard Twitter Bootstrap nav bar -->
    <nav class="navbar navbar-default"
            role="banner">
      <div class="container">
        <div class="navbar-header">
          <button type="button"
                  class="navbar-toggle"
                  data-toggle="collapse"
                  data-target=".our-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="/index.html" class="navbar-brand">Nate Clark</a>
        </div>
        <div class="collapse navbar-collapse our-nav-collapse"
             role="navigation">
          <ul class="nav navbar-nav">

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Tags <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/index.html">All Posts</a></li>

<li><a href="/tags/Elm.html">Elm</a></li>

<li><a href="/tags/Functional-Programming.html">Functional Programming</a></li>

<li><a href="/tags/Hello.html">Hello</a></li>

<li><a href="/tags/Pokemon.html">Pokemon</a></li>
              </ul>
            </li>
            <li>
              <a href="/About.html">About</a>
            </li> 
            <li><a href="/feeds/all.atom.xml">Atom</a></li>
            <li><a href="/feeds/all.rss.xml">RSS</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">

        <!-- Main column -->
        <div id="content" class="col-md-12">





          <article>
  <header>
    <h1>Voltorb Flip in Elm pt 2</h1>
    <p class='date-and-tags'>
<time datetime="2016-09-02" pubdate="true">2016-09-02</time> :: <span class="tags"><a href="/tags/Functional-Programming.html">Functional Programming</a>, <a href="/tags/Elm.html">Elm</a>, <a href="/tags/Pokemon.html">Pokemon</a></span></p>
  </header>

<p>Last week I wrote a <a href="blog/2016/08/26/voltorb-flip-in-elm/" title="Voltorb Flip In Elm">post</a> about my progess implementing the Pokemon mini-game <a href="http://bulbapedia.bulbagarden.net/wiki/Voltorb_Flip" title="Voltorb Flip">Voltorb Flip</a>. I was struggling with a bug related to generating a new game, but the <a href="https://groups.google.com/forum/#!forum/elm-discuss" title="Elm-Discuss">elm mailing list</a> helped me out (<a href="https://groups.google.com/forum/#!msg/elm-discuss/_MW_1EF9jSE/dNKNqMvFBwAJ;context-place=forum/elm-discuss" title="Thanks!">Thanks Joseph Ni</a>). In this post I&rsquo;ll talk about <a href="http://elm-lang.org" title="Elm">Elm</a>, my implementation, and a sample application used in <a href="http://guide.elm-lang.org/architecture/user_input/buttons.html" title="Sample Application">The Elm Guide</a>.</p>
<!-- more-->

<h3 id="starting-with-the-end">Starting With the End</h3>

<p>So, in the interest of showing off my work, here is the game. There is a CSS bug, but&hellip; meh. CSS isn&rsquo;t really my focus right now. I&rsquo;ve only been working in the browser for about two weeks. I&rsquo;ll get to CSS later.</p>

<p>As a reminder. The green/red text in the gray cells tell you how many points/mines are in that row/column. Exposing a mine causes you to lose. Exposing all the points &gt; 1 causes you to win.</p>

<div id="voltorb-flip"></div>

<script src="/js/voltorb-flip-2.js"></script>

<script>
var node = document.getElementById('voltorb-flip');
var app = Elm.Game.Main.embed(node);</script>

<p></p>

<h3 id="the-elm-architecture">The Elm Architecture</h3>

<p>It might be tempting to start by describing the Elm <em>language</em>, but I&rsquo;m not sure how useful that would be. The issue with describing the language first comes from two main points.</p>

<ol>
 <li>It seems that the language is designed with <a href="http://guide.elm-lang.org/architecture/" title="The Elm Architecture">The Elm Architecture</a> in mind.  So, describing the language by itself wouldn&rsquo;t tell the higher level story of  how you will almost certainly use the language.</li>
 <li>If describing the language would be exciting to you, you are probably already sold.  It is kind of the preaching to the choir problem. If &ldquo;Purely Functional&rdquo;, &ldquo;Reactive&rdquo;,  and &ldquo;Managed Effects&rdquo; sound exciting to you, my job is already done. If they sound like a  headache, I want to base the conversation in more familiar terms and walk us towards  an understanding of why those ideas fit nicely.</li></ol>

<p>As far as I can tell, all Elm applications are built in terms of a pattern/library  called <a href="http://guide.elm-lang.org/architecture/" title="The Elm Architecture">The Elm Architecture</a> (TEA). If you are familiar with the <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" title="MVC">Model-View-Controller</a> pattern, you are more than halfway there. TEA is defined by three main components: the model, the update function, and the view function.</p>

<p>My sense of the architecture sounds something like this.</p>

<ol>
 <li>Describe the shape of a state in the application.</li>
 <li>Describe how to produce new state.</li>
 <li>Describe how to view a given state.</li></ol>

<p>Once you provide these pieces to TEA, it will handle the event loop.</p>

<h3 id="the-model">The Model</h3>

<p>The model is the data that represents the state of your application. Considering the Elm guide&rsquo;s <a href="http://guide.elm-lang.org/architecture/user_input/buttons.html" title="Counter Example">simple increment/decrement counter web app</a> example, the state of your application is the number of times the user has clicked the button. That means that your model is just an Int not a class derived from some model-ish parent class. Just an int. If the user has clicked the increment button 3 times and the decrement button 6 times, the state of the application should be &ndash;3. In Elm, this looks like this.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kr">type</span> <span class="kr">alias</span> <span class="kt">Model</span> <span class="nf">=</span> <span class="kt">Int</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Voltorb flip is a bit more complex than a counter, so I have a more complex model. My model represents the state of the game. The game is in one of 4 possible states: NoGame, Playing, Won, and Lost. The Playing, Won, and Lost states have some additional information alongside them. They also know the state of the Board. A Board is a combination of three pieces of data: the location of the mines, the location of cells the user has exposed, and the locations and point values of the target cells. In Elm, this looks like the following code.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="cm">{-</span>
<span class="cm">The state of the game is one of:</span>
<span class="cm">    No Game is currently being played</span>
<span class="cm">    Currently playing the provided Board</span>
<span class="cm">    Won the provided Board</span>
<span class="cm">    Lost the provided Board</span>
<span class="cm">-}</span>
<span class="kr">type</span> <span class="kt">Model</span>
    <span class="nf">=</span> <span class="kt">NoGame</span>           
    <span class="nf">|</span> <span class="kt">Playing</span> <span class="kt">Board</span>    
    <span class="nf">|</span> <span class="kt">Won</span> <span class="kt">Board</span>        
    <span class="nf">|</span> <span class="kt">Lost</span> <span class="kt">Board</span>       

<span class="cm">{-</span>
<span class="cm">A Board is each of:</span>
<span class="cm">    A Set of (row, column) pairs that locate the mines.</span>
<span class="cm">    A Set of (row, column) pairs that locate the exposed cells.</span>
<span class="cm">    A Dictionary mapping (row, column) pairs to point values.</span>
<span class="cm">-}</span>
<span class="kr">type</span> <span class="kr">alias</span> <span class="kt">Board</span> <span class="nf">=</span>
    <span class="p">{</span> <span class="nv">mines</span> <span class="nf">:</span> <span class="kt">Set</span> <span class="p">(</span><span class="kt">Int</span><span class="p">,</span> <span class="kt">Int</span><span class="p">)</span>
    <span class="p">,</span> <span class="nv">exposed</span> <span class="nf">:</span> <span class="kt">Set</span> <span class="p">(</span><span class="kt">Int</span><span class="p">,</span> <span class="kt">Int</span><span class="p">)</span>
    <span class="p">,</span> <span class="nv">targets</span> <span class="nf">:</span> <span class="kt">Dict</span> <span class="p">(</span><span class="kt">Int</span><span class="p">,</span> <span class="kt">Int</span><span class="p">)</span> <span class="kt">Int</span> <span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>That, in its entirety, is my model for a game of Voltorb Flip. Of course, any novel data structure needs to have operations defined for it, and this model is no different. I define plenty of functions that use a Model to produce some new value. For example, the player wins the game when they expose all the target values. That sounds like a function from Board to Bool. And that is exactly what I wrote. The function takes a Board, and it evaluates to true if the set of target locations minus the set of exposed locations is empty.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7
8</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nv">allTargetsExposed</span> <span class="nf">:</span> <span class="kt">Board</span> <span class="nf">-&gt;</span> <span class="kt">Bool</span>
<span class="nv">allTargetsExposed</span> <span class="nv">board</span> <span class="nf">=</span>
    <span class="kr">let</span> <span class="nv">targetPoss</span> <span class="nf">=</span>
            <span class="nv">board</span><span class="nf">.</span><span class="nv">targets</span>
            <span class="nf">|&gt;</span> <span class="kt">Dict</span><span class="nf">.</span><span class="nv">keys</span>
            <span class="nf">|&gt;</span> <span class="kt">Set</span><span class="nf">.</span><span class="nv">fromList</span>
    <span class="kr">in</span> <span class="kt">Set</span><span class="nf">.</span><span class="nv">diff</span> <span class="nv">targetPoss</span> <span class="nv">board</span><span class="nf">.</span><span class="nv">exposed</span>
       <span class="nf">|&gt;</span> <span class="kt">Set</span><span class="nf">.</span><span class="nv">isEmpty</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The point is not Elm&rsquo;s syntax. The point is that a Model in TEA is just data. Simple data that is only as decorated as <em>you</em> need it to be. If the state of my application is an integer, that is totally fine.</p>

<h3 id="the-update-function">The Update Function</h3>

<p>Now that we have a description of the state of our application, we want a way to find out the next state. I&rsquo;ll go ahead and show the signature for the function and unpack from there.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nv">update</span> <span class="nf">:</span> <span class="kt">Msg</span> <span class="nf">-&gt;</span> <span class="kt">Model</span> <span class="nf">-&gt;</span> <span class="p">(</span><span class="kt">Model</span><span class="p">,</span> <span class="kt">Cmd</span> <span class="kt">Msg</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>In English, the update function uses a Msg, a Model, and it evaluates to a (Model, Cmd Msg) pair. So there are two new pieces in there: Msg, and Cmd. I&rsquo;ll touch on Cmd, but mostly focus on Msg.</p>

<h4 id="msg">Msg</h4>

<p>An Msg value is a description of what kind of update should be applied to the Model. In the counter example, there are two kinds of updates that can be applied: Increment, Decrement. Here is the elm to describe that new data type.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kr">type</span> <span class="kt">Msg</span>
    <span class="nf">=</span> <span class="kt">Increment</span>
    <span class="nf">|</span> <span class="kt">Decrement</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Given these possible Msg values (ignoring that whole Cmd thing), you could imagine that update would do something like this:</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nv">update</span> <span class="kt">Increment</span> <span class="mi">1</span> <span class="c1">-- should evaluate to (2, ???)</span>
<span class="nv">update</span> <span class="kt">Increment</span> <span class="mi">9000</span> <span class="c1">-- should evaluate to (9001, ???)</span>
<span class="nv">update</span> <span class="kt">Decrement</span> <span class="mi">43</span> <span class="c1">-- should evaluate to (42, ???)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>In Voltorb Flip, I have 3 possible messages: location can become exposed, a new game can be requested, and a new board can be initialized. Here is the elm to describe that new data type.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kr">type</span> <span class="kt">Msg</span>
    <span class="nf">=</span> <span class="kt">NewBoard</span> <span class="kt">Board</span>
    <span class="nf">|</span> <span class="kt">Expose</span> <span class="kt">Int</span> <span class="kt">Int</span>
    <span class="nf">|</span> <span class="kt">NewGame</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The difference between NewBoard and NewGame is subtle (and possibly because I&rsquo;m doing something wrong). So for right now, we can think about it as either exposing a cell or starting a new game. If you were in an object-oriented environment, these would probably be your public methods.</p>

<h4 id="cmd">Cmd</h4>

<p>At this point, you might be comfortable with the idea of taking a Msg, taking a Model, and producing a new Model. So let&rsquo;s get to the weirdest thing we&rsquo;ve seen so far.</p>

<p>So far, we haven&rsquo;t actually used anything specific to TEA; we&rsquo;ve just let TEA guide our use of the language. Cmd is our first explicitly TEA construct. At the beginning of the post I said that TEA will manage the event loop for the application, and Cmd is the language TEA speaks. Cmd is a data structure that describes something TEA should do for you.</p>

<p>That might sound a bit odd. You might ask yourself, &ldquo;Do something for me? As in, there are things I can&rsquo;t do?&rdquo; So, yes and yes. Remember those buzzwords &ldquo;Purely Functional&rdquo; and &ldquo;Managed Effects&rdquo;? This is where those start to get big.</p>

<p>And before the idea sounds too harsh, I would encourage you to consider something. As programming languages (and frameworks) have evolved over time, I think we have gotten a lot of leverage by constraining the programmer. We are constrained by structured programming. We are constrained by automatic memory management. We are constrained by static type systems. Sometimes they don&rsquo;t work out, but they can be great. So, however outlandish these ideas may sound, remember how ludicrous removing goto sounded. Okay, so back to your regularly scheduled programming.</p>

<p>Right, so in a language like python (not purely functional, has <em>unmanaged</em> effects), if I want a random integer between 0 and 100, I call the randint function from the random module. That function gives me back an integer between some bounds that I specify.</p>

<div class="brush: python">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="n">definitely_an_integer</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">probably_a_different_integer</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>I can&rsquo;t do this in Elm. Generating that random number involves executing a side-effect. If I want a random number, I have to ask TEA for that random number. And TEA speaks Cmd, so I need to find a way to create a Cmd that describes generating my random number. Sure enough, <a href="http://package.elm-lang.org/packages/elm-lang/core/latest/Random#generate" title="Random.generate">Elm&rsquo;s Random module</a> has a way for me to turn a Random.Generator (you guessed it, a description of the random value) into a Cmd.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kn">import </span><span class="nc">Random</span> <span class="nv">exposing</span> <span class="nf">(..)</span>

<span class="nv">int_generator</span> <span class="nf">:</span> <span class="kt">Random</span><span class="nf">.</span><span class="kt">Generator</span> <span class="kt">Int</span>
<span class="nv">int_generator</span> <span class="nf">=</span> <span class="kt">Random</span><span class="nf">.</span><span class="nv">int</span> <span class="mi">0</span> <span class="mi">100</span>

<span class="c1">-- Imagine my Msg type for some app is just an Int</span>
<span class="kr">type</span> <span class="kr">alias</span> <span class="kt">Msg</span> <span class="nf">=</span> <span class="kt">Int</span>

<span class="nv">cmd_for_tea</span> <span class="nf">:</span> <span class="kt">Cmd</span> <span class="kt">Int</span>
<span class="nv">cmd_for_tea</span> <span class="nf">=</span> <span class="kt">Random</span><span class="nf">.</span><span class="kt">Generate</span> <span class="nv">identity</span> <span class="nv">int_generator</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Creating a new voltorb flip game involves some random value generation, and this is why I have both NewGame and NewBoard Msgs. NewGame is there to ask TEA to create a NewBoard with the randomly generated Board. NewBoard is to construct a new Model with a (possibly randomly generated) Board. Expose is there to expose a cell in the current Board. So here is my update function.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nv">update</span> <span class="nf">:</span> <span class="kt">Msg</span> <span class="nf">-&gt;</span> <span class="kt">Model</span> <span class="nf">-&gt;</span> <span class="p">(</span><span class="kt">Model</span><span class="p">,</span> <span class="kt">Cmd</span> <span class="kt">Msg</span><span class="p">)</span>
<span class="nv">update</span> <span class="nv">msg</span> <span class="nv">model</span> <span class="nf">=</span>
    <span class="kr">case</span> <span class="nv">msg</span> <span class="kr">of</span>
        <span class="kt">NewBoard</span> <span class="nv">board</span> <span class="nf">-&gt;</span> <span class="p">(</span><span class="kt">Playing</span> <span class="nv">board</span><span class="p">,</span> <span class="kt">Cmd</span><span class="nf">.</span><span class="nv">none</span><span class="p">)</span>
        <span class="kt">Expose</span> <span class="nv">row</span> <span class="nv">column</span> <span class="nf">-&gt;</span> <span class="p">(</span><span class="nv">expose</span> <span class="nv">model</span> <span class="nv">row</span> <span class="nv">column</span><span class="p">,</span> <span class="kt">Cmd</span><span class="nf">.</span><span class="nv">none</span><span class="p">)</span>
        <span class="kt">NewGame</span> <span class="nf">-&gt;</span> <span class="p">(</span><span class="nv">model</span><span class="p">,</span> <span class="kt">Random</span><span class="nf">.</span><span class="nv">generate</span> <span class="kt">NewBoard</span> <span class="nv">randomBoard</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>That&rsquo;s it. You&rsquo;ll notice a helper function <code>expose</code>. You might be able to infer what it does. It takes a Model, an Int, an Int, and evaluates to the Model where the corresponding cell has been exposed.</p>

<p>So to summarize Msg and Cmd.</p>

<ol>
 <li>Msg is the language your application speaks.</li>
 <li>Cmd is the language TEA speaks.</li>
 <li>If you need some side effect performed, you to give TEA a Cmd describing it.</li></ol>

<h3 id="the-view-function">The View Function</h3>

<p>While the idea of a Model being basic data might be somewhat &ldquo;back to basics,&rdquo; the view function is an idea that is very much in vogue. The view function is a function that takes in a Model and evaluates to a data structure representing HTML. Facebook&rsquo;s UI building library <a href="https://facebook.github.io/react/" title="React">React</a> is popularizing this idea using the name <a href="https://facebook.github.io/react/docs/glossary.html" title="Virtual DOM">virtual DOM</a>.</p>

<p>We&rsquo;ve come a long way now, so let&rsquo;s just throw out the counter view.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nv">view</span> <span class="nf">:</span> <span class="kt">Model</span> <span class="nf">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="nv">view</span> <span class="nv">model</span> <span class="nf">=</span>
  <span class="nv">div</span> <span class="p">[]</span>
    <span class="p">[</span> <span class="nv">button</span> <span class="p">[</span> <span class="nv">onClick</span> <span class="kt">Decrement</span> <span class="p">]</span> <span class="p">[</span> <span class="nv">text</span> <span class="s">"-"</span> <span class="p">]</span>
    <span class="p">,</span> <span class="nv">div</span> <span class="p">[]</span> <span class="p">[</span> <span class="nv">text</span> <span class="p">(</span><span class="nv">toString</span> <span class="nv">model</span><span class="p">)</span> <span class="p">]</span>
    <span class="p">,</span> <span class="nv">button</span> <span class="p">[</span> <span class="nv">onClick</span> <span class="kt">Increment</span> <span class="p">]</span> <span class="p">[</span> <span class="nv">text</span> <span class="s">"+"</span> <span class="p">]</span>
    <span class="p">]</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>If you&rsquo;ve done any React work, this might feel pretty familiar. In this case, the view for this application is a div containing two buttons and a div that shows the string conversion of the model (Elm won&rsquo;t silently turn an Int into a String).</p>

<p>There is an interesting thing about the Html data structure. It is <code>Html Msg</code> instead of plain <code>Html</code>. Understandably, the Html you produce is expected to be able to feed an Msg that your application understands back into your update function. So, when a user clicks on the first button, TEA will call update with Decrement and the current model. It will use the result of that call as the new application state and execute the Cmd. Here is a bit of the voltorb flip view code.</p>

<div class="brush: elm">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nv">view</span> <span class="nf">:</span> <span class="kt">Model</span> <span class="nf">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="nv">view</span> <span class="nv">model</span> <span class="nf">=</span>
    <span class="kr">case</span> <span class="nv">model</span> <span class="kr">of</span>
        <span class="kt">NoGame</span> <span class="nf">-&gt;</span> <span class="nv">restartButton</span>
        <span class="kt">Playing</span> <span class="nv">board</span> <span class="nf">-&gt;</span> <span class="nv">viewBoard</span> <span class="nv">board</span>
        <span class="kt">Won</span> <span class="nv">board</span> <span class="nf">-&gt;</span> 
            <span class="nv">div</span> <span class="p">[]</span> <span class="p">[</span> <span class="nv">text</span> <span class="s">"You Win!"</span>
                   <span class="p">,</span> <span class="nv">viewBoard</span> <span class="p">{</span><span class="nv">board</span> <span class="nf">|</span> <span class="nv">exposed</span> <span class="nf">=</span> <span class="nv">allPoss</span><span class="p">}</span> <span class="p">]</span>
        <span class="kt">Lost</span> <span class="nv">board</span> <span class="nf">-&gt;</span>
            <span class="nv">div</span> <span class="p">[]</span> <span class="p">[</span> <span class="nv">text</span> <span class="s">"You Lose!"</span>
                   <span class="p">,</span> <span class="nv">viewBoard</span> <span class="p">{</span><span class="nv">board</span> <span class="nf">|</span> <span class="nv">exposed</span> <span class="nf">=</span> <span class="nv">allPoss</span><span class="p">}]</span>

<span class="nv">restartButton</span> <span class="nf">:</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="nv">restartButton</span> <span class="nf">=</span>
    <span class="nv">button</span> <span class="p">[</span> <span class="nv">onClick</span> <span class="kt">NewGame</span> <span class="p">]</span> <span class="p">[</span> <span class="nv">text</span> <span class="s">"Click to Restart"</span> <span class="p">]</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Again, you probably noticed the <code>viewBoard</code> helper function. It takes a <code>Board</code> and evaluates to <code>Html Msg</code>.</p>

<h3 id="final-thoughts">Final Thoughts</h3>

<p>I&rsquo;ve really enjoyed writing this app. Elm is a great fit for me, and TEA provided a great way to help me break down my application into simple pieces (that stay simple pieces).</p>

<p>Personally, I came to Elm for the language features. I&rsquo;m a big fan of functional programming (particularly ML style languages) and interested in anything labelled Reactive.</p>

<p>I&rsquo;ve come to believe a few things:</p>

<ol>
 <li>Most developers don&rsquo;t become visibly excited when they hear  &ldquo;purely functional, reactive ML in the browser&rdquo; (I may have actually squealed).  So, people might be more interested in TEA, and then learn how to love  pure functional programming through the wins that TEA gives you.</li>
 <li>Elm + TEA is great. It even seems that plenty of devs are moving towards  it <a href="https://facebook.github.io/react/" title="React">one</a> .. <a href="http://redux.js.org/" title="Redux">js</a> .. <a href="https://lodash.com/" title="Lodash">library</a> .. at a <a href="https://flowtype.org/" title="Flow">time</a> (<a href="https://www.typescriptlang.org/" title="Typescript">or maybe typescript</a>).</li>
 <li>The Elm community is pretty great. My question to the mailing list was answered correctly  within 24 hours (of a Friday evening post).</li>
 <li>The Elm compiler is pretty remarkable. I dare you to find a compiler that is more interested  in <em>helping</em> a developer (of any skill level) correct their code. I won&rsquo;t spoil your first  compiler error for you. Go write some incorrect Elm code; learn to see compilers in a new light.</li></ol>

<h3 id="next-week--robot-voltorb-flip">Next Week : Robot Voltorb Flip</h3>
  <footer>
    <script type="text/javascript">
      !function(d,s,id){
          var js,fjs=d.getElementsByTagName(s)[0];
          if(!d.getElementById(id)){
              js=d.createElement(s);
              js.id=id;
              js.src="//platform.twitter.com/widgets.js";
              fjs.parentNode.insertBefore(js,fjs);
          }
      }(document,"script","twitter-wjs");
    </script>
    <a href="https://twitter.com/share"
       class="twitter-share-button"
       data-url="http://www.example.com/blog/2016/09/02/voltorb-flip-in-elm-pt-2/"
       data-dnt="true">
      "Tweet"</a>
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    <g:plusone size="medium" href="http://www.example.com/blog/2016/09/02/voltorb-flip-in-elm-pt-2/"></g:plusone>
    <script type="text/javascript">
      var disqus_shortname = 'shortname';
      (function() {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <div id="disqus_thread"></div>
    <ul class="pager">

    <li class="next">
      <a href="/blog/2016/08/26/voltorb-flip-in-elm/"><em>Voltorb Flip in Elm</em> &rarr;</a>
    </li>
    </ul>
  </footer>
</article>
        </div>
      </div>
      <footer>
        <hr />
        <p>Edited with <a href="https://code.visualstudio.com/">Visual Studio Code</a></p>
        <p>Generated by <a href="https://github.com/greghendershott/frog">Frog</a>, the <strong>fr</strong>ozen bl<strong>og</strong> tool.</p>
        <p>Styled with <a href="http://twitter.github.com/bootstrap/index.html">Bootstrap</a> and <a href="https://bootswatch.com/darkly/">Darkly</a>.</p>
      </footer>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="//code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  </body>
</html>